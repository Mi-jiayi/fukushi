{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/cloudbyte-mac2/Downloads/rep/fukushi/src/components/Header.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { IoPersonOutline } from \"react-icons/io5\";\nimport { useAccount } from \"../context/AccountProvider\";\nimport axios from \"axios\";\nimport { Account } from \"../model/schemas\";\n\n// ヘッダー\nconst Header = () => {\n  const { selectedAccount, setSelectedAccount } = useAccount();\n  const [accountList, setAccountList] = useState<Account[]>([]);\n  // セレクトボックス表示フラグ\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  // dom要素ref\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  // アカウントリストを取得\n  const fetchAccountList = async () => {\n    try {\n      const result = await axios.get(\"/api/account/list\");\n      setAccountList(result.data);\n\n      if (result.data && result.data.length > 0 && !selectedAccount) {\n        setSelectedAccount(result.data[0]);\n      }\n    } catch (error) {\n      console.error(\"Error fetching accounts:\", error);\n    }\n  };\n\n  // ドロップダウンを切り替え\n  const toggleDropdown = () => {\n    setIsDropdownOpen((prev) => !prev);\n  };\n\n  // アカウントを変更\n  const handleAccountChange = (account: Account) => {\n    setSelectedAccount(account);\n    setIsDropdownOpen(false); // 关闭下拉框\n  };\n\n  useEffect(() => {\n    fetchAccountList();\n\n    // セレクトボックスを非表示\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        dropdownRef.current &&\n        !dropdownRef.current.contains(event.target as Node)\n      ) {\n        setIsDropdownOpen(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, []);\n\n  return (\n    <header className=\"bg-gray-300 p-4 flex justify-end items-center\">\n      <div className=\"relative\" ref={dropdownRef}>\n        <button\n          className=\"flex items-center bg-white px-4 py-2 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200\"\n          onClick={toggleDropdown}\n        >\n          <IoPersonOutline className=\"text-gray-800 w-5 h-5\" />\n          <span className=\"text-gray-800 ml-2 font-medium\">\n            {selectedAccount ? selectedAccount.accountName : \"\"}\n          </span>\n        </button>\n\n        {/* セレクトボックス */}\n        {isDropdownOpen && (\n          <div className=\"absolute right-0 mt-2 bg-white border border-gray-300 rounded-lg shadow-lg z-10\">\n            <ul className=\"py-1\">\n              {accountList.map((account, index) => (\n                <li\n                  key={index}\n                  className=\"px-4 py-2 hover:bg-gray-100 cursor-pointer text-gray-800\"\n                  onClick={() => handleAccountChange(account)}\n                >\n                  {account.accountName}\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AAFA;;;AAHA;;;;;AAQA,OAAO;AACP,MAAM,SAAS;;IACb,MAAM,EAAE,eAAe,EAAE,kBAAkB,EAAE,GAAG,CAAA,GAAA,qIAAA,CAAA,aAAU,AAAD;IACzD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAa,EAAE;IAC5D,gBAAgB;IAChB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrD,WAAW;IACX,MAAM,cAAc,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAkB;IAE3C,cAAc;IACd,MAAM,mBAAmB;QACvB,IAAI;YACF,MAAM,SAAS,MAAM,wIAAA,CAAA,UAAK,CAAC,GAAG,CAAC;YAC/B,eAAe,OAAO,IAAI;YAE1B,IAAI,OAAO,IAAI,IAAI,OAAO,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,iBAAiB;gBAC7D,mBAAmB,OAAO,IAAI,CAAC,EAAE;YACnC;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;QAC5C;IACF;IAEA,eAAe;IACf,MAAM,iBAAiB;QACrB,kBAAkB,CAAC,OAAS,CAAC;IAC/B;IAEA,WAAW;IACX,MAAM,sBAAsB,CAAC;QAC3B,mBAAmB;QACnB,kBAAkB,QAAQ,QAAQ;IACpC;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;4BAAE;YACR;YAEA,eAAe;YACf,MAAM;uDAAqB,CAAC;oBAC1B,IACE,YAAY,OAAO,IACnB,CAAC,YAAY,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAC1C;wBACA,kBAAkB;oBACpB;gBACF;;YACA,SAAS,gBAAgB,CAAC,aAAa;YACvC;oCAAO;oBACL,SAAS,mBAAmB,CAAC,aAAa;gBAC5C;;QACF;2BAAG,EAAE;IAEL,qBACE,6LAAC;QAAO,WAAU;kBAChB,cAAA,6LAAC;YAAI,WAAU;YAAW,KAAK;;8BAC7B,6LAAC;oBACC,WAAU;oBACV,SAAS;;sCAET,6LAAC,kJAAA,CAAA,kBAAe;4BAAC,WAAU;;;;;;sCAC3B,6LAAC;4BAAK,WAAU;sCACb,kBAAkB,gBAAgB,WAAW,GAAG;;;;;;;;;;;;gBAKpD,gCACC,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAG,WAAU;kCACX,YAAY,GAAG,CAAC,CAAC,SAAS,sBACzB,6LAAC;gCAEC,WAAU;gCACV,SAAS,IAAM,oBAAoB;0CAElC,QAAQ,WAAW;+BAJf;;;;;;;;;;;;;;;;;;;;;;;;;;AAavB;GAnFM;;QAC4C,qIAAA,CAAA,aAAU;;;KADtD;uCAqFS"}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}